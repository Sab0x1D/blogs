---
layout: default
---

<link rel="stylesheet" href="{{ '/assets/css/theme.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/site.css'  | relative_url }}">
<script defer src="{{ '/assets/js/theme.js' | relative_url }}"></script>

<style>
  /* ===== Wide hero / ribbon – override site.css grid ===== */
  .post-hero{
    display: block !important;
    padding: 50px 0 20px;
    border-bottom: 1px solid rgba(15,23,42,.06);
    margin-bottom: 28px;
  }

  /* Use your global .container to center and cap width */
  .post-hero > .container{
    max-width: 1200px;
    margin: 0 auto;
    padding-inline: 32px;
  }

  /* Two-column hero internals */
  .post-hero .hero-grid{
    display: grid;
    grid-template-columns: minmax(0, 1.05fr) minmax(320px, 420px);
    gap: 32px;
    align-items: center;
  }

  @media (max-width: 980px){
    .post-hero > .container{ padding-inline: 20px; }
    .post-hero .hero-grid{
      grid-template-columns: 1fr;
      gap: 18px;
    }
  }

  .hero-title{
    margin: 0 0 10px;
    font-weight: 800;
    letter-spacing: -0.015em;
    line-height: 1.1;
    font-size: clamp(28px, 5.2vw, 48px);
    color: var(--text, #0b0f19);
  }
  .hero-excerpt{
    margin: 10px 0 14px;
    color: var(--muted, #6b7280);
    line-height: 1.6;
    font-size: clamp(16px, 1.7vw, 18px);
    max-width: 62ch;
  }
  .hero-byline{
    display: flex; align-items: center; gap: 12px;
    color: var(--muted-2, #9aa3b2);
    margin-top: 8px;
    font-size: 14px;
  }
  .hero-byline .avatar{
    width: 38px; height: 38px; border-radius: 50%;
    object-fit: cover; display: block;
  }
  .hero-media img{
    width: 100%; height: auto; display: block;
    border-radius: 18px;
    box-shadow: var(--shadow, 0 16px 40px rgba(2,10,30,.08));
    aspect-ratio: 4 / 3; object-fit: cover;
  }

  /* ===== Narrow reading column ===== */
  .post-wrap { max-width: 78ch; margin: 0 auto; padding: 0 20px; }
  .post-content img { max-width: 100%; height: auto; border-radius: 10px; }
  .post-back { margin-top: 2rem; }

  /* ===== Post neighbors (older posts) ===== */
  .post-neighbors{
    max-width: 1100px;
    margin: 48px auto 24px;
    padding: 0 20px;
    display: block !important; /* safety */
  }
  .post-neighbors .grid{
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 16px;
  }
  @media (max-width: 820px){
    .post-neighbors .grid{ grid-template-columns: 1fr; }
  }

  .nav-card{
    display: grid;
    grid-template-columns: 108px 1fr;
    gap: 14px;
    align-items: center;
    background: var(--card);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    box-shadow: 0 8px 22px rgba(2,10,30,.06);
    padding: 12px;
    text-decoration: none;
    color: inherit;
    transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
  }
  .nav-card:hover{
    transform: translateY(-2px);
    border-color: rgba(15,23,42,.15);
    box-shadow: 0 12px 28px rgba(2,10,30,.10);
  }
  .nav-card .thumb{
    width: 100%; height: 80px;
    object-fit: cover; border-radius: 12px;
    background: #f1f5f9;
  }
  .nav-card small{
    display: inline-block;
    font-weight: 700;
    color: var(--muted-2);
    margin-bottom: 6px;
    letter-spacing: .02em;
  }
  .nav-card .title{
    margin: 0;
    font-weight: 800;
    line-height: 1.25;
    font-size: 16px;
  }
</style>

{%- assign hero_img = page.hero | default: page.thumb -%}

<!-- CENTERED hero/ribbon -->
<section class="post-hero">
  <div class="container">
    <div class="hero-grid">
      <div class="hero-copy">
        <h1 class="hero-title">{{ page.title }}</h1>
        {% if page.excerpt %}
          <p class="hero-excerpt">{{ page.excerpt }}</p>
        {% endif %}
        <div class="hero-byline">
          {% if page.author_avatar %}
            <img class="avatar" src="{{ page.author_avatar | relative_url }}" alt="{{ page.author | default: site.title }}">
          {% endif %}
          <div>
            <div>{{ page.author | default: site.title }}</div>
            {% if page.date %}
              <div>{{ page.date | date: "%d %b %Y" }}</div>
            {% endif %}
          </div>
        </div>
      </div>

      {% if hero_img %}
        <figure class="hero-media">
          <img src="{{ hero_img | relative_url }}" alt="">
        </figure>
      {% endif %}
    </div>
  </div>
</section>

{%- comment -%}
  OLDER POSTS — Liquid-safe version (no "not", no boolean expressions in assign).
  Uses the page's collection when present, else falls back to site.posts.
{%- endcomment -%}
{%- assign coll = site[page.collection] -%}
{%- if coll == nil or coll.size == 0 -%}
  {%- assign coll = site.posts -%}
{%- endif -%}

{%- assign master = coll | sort: "date" | reverse -%}
{%- assign older1 = nil -%}
{%- assign older2 = nil -%}
{%- assign seen_current = false -%}

{%- for doc in master -%}
  {%- if doc.id == page.id -%}
    {%- assign is_self = true -%}
  {%- else -%}
    {%- assign is_self = false -%}
  {%- endif -%}

  {%- if seen_current and is_self != true -%}
    {%- assign skip = false -%}
    {%- if doc.draft == true -%}{%- assign skip = true -%}{%- endif -%}
    {%- if doc.featured == true -%}{%- assign skip = true -%}{%- endif -%}

    {%- if skip != true -%}
      {%- if older1 == nil -%}
        {%- assign older1 = doc -%}
      {%- elsif older2 == nil -%}
        {%- assign older2 = doc -%}
        {%- break -%}
      {%- endif -%}
    {%- endif -%}
  {%- endif -%}

  {%- if is_self == true -%}
    {%- assign seen_current = true -%}
  {%- endif -%}
{%- endfor -%}

<!-- NARROW reading area -->
<article class="post">
  <div class="post-wrap">
    <div class="post-content">
      {{ content }}
      {%- unless older1 -%}
        <p class="post-back"><a href="{{ '/' | relative_url }}">⬅ Return to Blog Index</a></p>
      {%- endunless -%}
    </div>
  </div>
</article>

{%- if older1 or older2 -%}
<section class="post-neighbors" aria-label="Older posts">
  <div class="grid">
    {%- if older1 -%}
    <a class="nav-card" href="{{ older1.url | relative_url }}">
      <img class="thumb" src="{{ (older1.thumb | default: site.default_thumb) | relative_url }}" alt="">
      <div>
        <small>Older post</small>
        <h3 class="title">{{ older1.title }}</h3>
      </div>
    </a>
    {%- endif -%}

    {%- if older2 -%}
    <a class="nav-card" href="{{ older2.url | relative_url }}">
      <img class="thumb" src="{{ (older2.thumb | default: site.default_thumb) | relative_url }}" alt="">
      <div>
        <small>Older post</small>
        <h3 class="title">{{ older2.title }}</h3>
      </div>
    </a>
    {%- endif -%}
  </div>
</section>
{%- endif -%}
