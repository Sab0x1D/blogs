---
layout: default
title: Blog Index
permalink: /blog-index/
---

<link rel="stylesheet" href="{{ '/assets/css/theme.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/site.css'  | relative_url }}">

<section class="home">
  <div class="container">
    <h2 class="section-title">BLOG INDEX</h2>

    {%- assign items_sorted = site.listings | sort: "date" | reverse -%}
    {%- assign years = items_sorted | group_by_exp: "p", "p.date | date: '%Y'" -%}

    <section class="blog-tree" aria-label="Blog index by year and month">
      {%- for year in years -%}
        <details class="blog-tree__year" open>
          <summary class="blog-tree__summary">
            <span class="blog-tree__label">{{ year.name }}</span>
            <span class="blog-tree__count">{{ year.items | size }} posts</span>
          </summary>

          {%- assign months = year.items | group_by_exp: "p", "p.date | date: '%m'" -%}

          {%- for month in months -%}
            {%- assign month_name = month.items[0].date | date: "%B" -%}

            <details class="blog-tree__month">
              <summary class="blog-tree__summary blog-tree__summary--month">
                <span class="blog-tree__label">{{ month_name }}</span>
                <span class="blog-tree__count">{{ month.items | size }}</span>
              </summary>

              <ul class="blog-tree__list">
                {%- for post in month.items -%}
                  {%- assign thumb = post.thumb | default: site.default_thumb -%}
                  <li class="blog-tree__item">
                    <a class="blog-tree__link" href="{{ post.url | relative_url }}">
                      <span class="blog-tree__thumb">
                        <img
                          src="{{ thumb | relative_url }}"
                          alt=""
                          loading="lazy"
                          width="56"
                          height="56"
                        >
                      </span>

                      <span class="blog-tree__title">
                        {{ post.pretty_title | default: post.title }}
                        <span class="blog-tree__meta">{{ post.date | date: "%d %b %Y" }}</span>
                      </span>
                    </a>
                  </li>
                {%- endfor -%}
              </ul>
            </details>
          {%- endfor -%}
        </details>
      {%- endfor -%}
    </section>
  </div>
</section>
