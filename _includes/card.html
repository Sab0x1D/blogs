{%- assign d = include.doc -%}
{%- assign v = include.variant | default: 'lg' -%}

{%- comment -%}
  FIELDS USED:
    d.title, d.url, d.date, d.tags, d.excerpt, d.author (optional)
    d.thumb (optional) — falls back to site.default_thumb
{%- endcomment -%}

{%- assign thumb = d.thumb | default: site.default_thumb -%}

<a class="card card--{{ v }} elevated" href="{{ d.url | relative_url }}" data-tags="{{ d.tags | join: ',' }}">
  <div class="media">
    <img class="thumb" loading="lazy" decoding="async" src="{{ thumb | relative_url }}" alt="{{ d.title }}">
    <div class="meta-top">
      {%- assign by = d.author | default: site.author_name -%}
      {%- if by %}<span class="by">{{ by }}</span><span class="sep">–</span>{% endif %}
      {%- if d.date %}<span class="date">{{ d.date | date: "%d %b %Y" }}</span>{% endif %}
    </div>
  </div>

  <div class="body">
    <h3 class="title">{{ d.title }}</h3>

    {%- if v == 'lg' -%}
      {%- if d.excerpt -%}
        <p class="excerpt">{{ d.excerpt }}</p>
      {%- endif -%}

      {%- if d.tags and d.tags.size > 0 -%}
        <div class="chips">
          {%- for t in d.tags -%}
            <span class="chip">{{ t }}</span>
          {%- endfor -%}
        </div>
      {%- endif -%}
    {%- endif -%}
  </div>
</a>
